{"mappings":"ACOI,gJAQA,uQAUC,qFAOD,oFAKA,wFAKA,mHAIC,iFASA,+DCYD,mEAGC,6DASA,mFCpED,kGAOA,qEAIC,oJAcA,8KAaA,sGAQA,mFC8ID,uDAEC,yFAQD,4FAIC,8FASD,+FAMA,kFAKA,+CAKA,uHAMA,gEAKA,iKASA,kFAIA,wEAKA,0DAIA,kFAMA,qEAIA","sources":["main.css","src-frontend/components/Loader.svelte","src-frontend/components/Editor.svelte","src-frontend/components/Switch.svelte","src-frontend/App.svelte"],"sourcesContent":[".loader.svelte-1nfoswr {\n  height: var(--loader-size, 1em);\n  width: calc(var(--loader-size, 1em) * 5);\n  font-size: 20px;\n  display: inline-block;\n  position: relative;\n}\n\n.loader__dot.svelte-1nfoswr {\n  width: var(--loader-size, 1em);\n  height: var(--loader-size, 1em);\n  background: var(--loader-color, #555);\n  border-radius: .5em;\n  animation-duration: .5s;\n  animation-timing-function: ease;\n  animation-iteration-count: infinite;\n  display: block;\n  position: absolute;\n}\n\n.loader__dot.svelte-1nfoswr:nth-child(1) {\n  animation-name: svelte-1nfoswr-reveal;\n  left: 0;\n}\n\n.loader__dot.svelte-1nfoswr:nth-child(2) {\n  animation-name: svelte-1nfoswr-slide;\n  left: 0;\n}\n\n.loader__dot.svelte-1nfoswr:nth-child(3) {\n  animation-name: svelte-1nfoswr-slide;\n  left: 1.5em;\n}\n\n.loader__dot.svelte-1nfoswr:nth-child(4) {\n  animation-name: svelte-1nfoswr-reveal;\n  animation-direction: reverse;\n  left: 3em;\n}\n\n@keyframes svelte-1nfoswr-reveal {\n  from {\n    transform: scale(.001);\n  }\n\n  to {\n    transform: scale(1);\n  }\n}\n\n@keyframes svelte-1nfoswr-slide {\n  to {\n    transform: translateX(1.5em);\n  }\n}\n\n.wrap-editor-svelte.svelte-u1zame {\n  z-index: 100001;\n  position: relative;\n}\n\n.loading.svelte-u1zame {\n  visibility: hidden;\n  pointer-events: none;\n}\n\n.l.svelte-u1zame {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n}\n\n.switch.svelte-ul096x.svelte-ul096x {\n  width: 60px;\n  height: 34px;\n  display: inline-block;\n  position: relative;\n}\n\n.switch.svelte-ul096x input.svelte-ul096x {\n  opacity: 0;\n  width: 0;\n  height: 0;\n}\n\n.slider.svelte-ul096x.svelte-ul096x {\n  width: 100%;\n  cursor: pointer;\n  background-color: #ccc;\n  border-radius: 34px;\n  transition: all .4s;\n  position: absolute;\n  inset: 0;\n}\n\n.slider.svelte-ul096x.svelte-ul096x:before {\n  content: \"\";\n  height: 26px;\n  width: 26px;\n  background-color: #fff;\n  border-radius: 50%;\n  transition: all .4s;\n  position: absolute;\n  bottom: 4px;\n  left: 4px;\n}\n\ninput.svelte-ul096x:checked + .slider.svelte-ul096x {\n  background-color: #2196f3;\n  box-shadow: 0 0 1px #2196f3;\n}\n\ninput.svelte-ul096x:checked + .slider.svelte-ul096x:before {\n  transform: translateX(26px);\n}\n\n.interval.svelte-s9w14t.svelte-s9w14t {\n  padding-top: 20px;\n}\n\n.button-wrap.svelte-s9w14t.svelte-s9w14t {\n  float: none;\n  margin-bottom: 0;\n  display: inline-block;\n}\n\n.button-icon.svelte-s9w14t.svelte-s9w14t {\n  height: 34px;\n  align-items: center;\n  display: inline-flex;\n}\n\n.dashicons.svelte-s9w14t.svelte-s9w14t {\n  height: auto;\n  width: auto;\n  margin-right: 5px;\n  font-size: 14px;\n}\n\n.top.svelte-s9w14t.svelte-s9w14t {\n  justify-content: space-between;\n  margin-bottom: 15px;\n  display: flex;\n}\n\n.bottom.svelte-s9w14t.svelte-s9w14t {\n  border-top: 2px solid #0c0c0c;\n  padding-top: 20px;\n}\n\n.tabs.svelte-s9w14t.svelte-s9w14t {\n  display: flex;\n}\n\n.tabs-ul.svelte-s9w14t.svelte-s9w14t {\n  width: 100%;\n  border-bottom: 2px solid #000 !important;\n  padding: .2em .2em 2em !important;\n}\n\n.tabs-li.svelte-s9w14t.svelte-s9w14t {\n  float: left;\n  list-style: none;\n}\n\n.tabs__button.svelte-s9w14t.svelte-s9w14t {\n  cursor: pointer;\n  background-color: #f8f8f8;\n  border: 1px solid #ccc;\n  margin: 0 8px 8px 0;\n  padding: .5em 1em;\n  text-decoration: none;\n}\n\n.tabs__button.svelte-s9w14t.svelte-s9w14t:first-child {\n  border-right: 1px solid #ddd;\n}\n\n.active.svelte-s9w14t.svelte-s9w14t {\n  color: #fff;\n  background-color: #3b8d69;\n}\n\n.tab__inner.svelte-s9w14t.svelte-s9w14t {\n  padding: 1em 1.4em;\n}\n\n.button-cancel.svelte-s9w14t.svelte-s9w14t {\n  align-items: center;\n  display: inline-flex;\n}\n\n.button-cancel.svelte-s9w14t .dashicons.svelte-s9w14t {\n  font-size: 20px;\n}\n\n.button-cancel.svelte-s9w14t.svelte-s9w14t:hover {\n  color: #fff;\n  background-color: #a03b36;\n  border-color: #a03b36;\n  box-shadow: 0 1px #a03b36;\n}\n\n/*# sourceMappingURL=main.css.map */\n","<div class=\"loader\" {...$$props}>\r\n    <span class=\"loader__dot\"></span>\r\n    <span class=\"loader__dot\"></span>\r\n    <span class=\"loader__dot\"></span>\r\n    <span class=\"loader__dot\"></span>\r\n</div>\r\n<style>\r\n    .loader {\r\n        display: inline-block;\r\n        font-size: 20px;\r\n        position: relative;\r\n        height: var(--loader-size, 1em);\r\n        width: calc(var(--loader-size, 1em) * 5);\r\n    }\r\n\r\n    .loader__dot {\r\n        display: block;\r\n        width: var(--loader-size, 1em);\r\n        height: var(--loader-size, 1em);\r\n        border-radius: 0.5em;\r\n        background: var(--loader-color, #555);\r\n        position: absolute;\r\n        animation-duration: 0.5s;\r\n        animation-timing-function: ease;\r\n        animation-iteration-count: infinite;\r\n    }\r\n\r\n    .loader__dot:nth-child(1) {\r\n        left: 0;\r\n        animation-name: reveal;\r\n    }\r\n\r\n    .loader__dot:nth-child(2) {\r\n        left: 0;\r\n        animation-name: slide;\r\n    }\r\n\r\n    .loader__dot:nth-child(3) {\r\n        left: 1.5em;\r\n        animation-name: slide;\r\n    }\r\n\r\n    .loader__dot:nth-child(4) {\r\n        left: 3em;\r\n        animation-name: reveal;\r\n        animation-direction: reverse;\r\n    }\r\n\r\n    @keyframes reveal {\r\n        from {\r\n            transform: scale(0.001);\r\n        }\r\n        to {\r\n            transform: scale(1);\r\n        }\r\n    }\r\n\r\n    @keyframes slide {\r\n        to {\r\n            transform: translateX(1.5em);\r\n        }\r\n    }\r\n</style>","<script>\r\n  import { createEventDispatcher, onMount } from 'svelte'\r\n  import Loader from './Loader.svelte'\r\n\r\n  export let id\r\n  export let value = ''\r\n  export let name = ''\r\n  export let ready = false\r\n  export let mediaButtons = false\r\n  let _editor = null\r\n  const dispatch = createEventDispatcher()\r\n  onMount(\r\n    () => {\r\n      const props = window.tinyMCEPreInit.mceInit.__editor__\r\n      // props.toolbar1 = props.toolbar1.replace(/wp_more,/, '')\r\n      // props.toolbar2 = props.toolbar2 + ',fontselect,fontsizeselect'\r\n      // props.plugins = 'charmap,colorpicker,hr,lists,paste,tabfocus,textcolor,wordpress,wpautoresize,wpemoji,wplink,wpdialogs,wptextpattern'\r\n      window.wp.editor.initialize(\r\n        id,\r\n        {\r\n          tinymce: {\r\n            ...props,\r\n            height: '410',\r\n            selector: `#${id}`,\r\n            setup: (editor) => {\r\n              _editor = editor\r\n              editor.on('init', (e) => {\r\n                ready = true\r\n              })\r\n              editor.on('input', (e) => {\r\n                change(editor.getContent())\r\n              })\r\n              editor.on('Change', (e) => {\r\n                change(editor.getContent())\r\n              })\r\n            }\r\n          },\r\n          quicktags: true,\r\n          mediaButtons: mediaButtons\r\n        }\r\n      )\r\n\r\n      return () => window.wp.editor.remove(id)\r\n    }\r\n  )\r\n\r\n  function change (content) {\r\n    console.log(_editor.getContent())\r\n    dispatch('change', { content })\r\n  }\r\n\r\n  $: if (value !== undefined && window.tinyMCE.get(id) && value !== window.tinyMCE.get(id).getContent()) {\r\n    window.tinyMCE.get(id).setContent(value)\r\n  }\r\n</script>\r\n<div class=\"wrap-editor-svelte\">\r\n    {#if !ready}\r\n        <div class=\"l\">\r\n            <Loader style=\"--loader-size: 15px; --loader-color: #2196f3\"/>\r\n        </div>\r\n    {/if}\r\n    <div class:loading={!ready}>\r\n        <textarea {id} value={value} name={name} class=\"wp-editor-area\" autocomplete=\"off\"\r\n                  aria-hidden=\"true\"></textarea>\r\n    </div>\r\n</div>\r\n<style>\r\n    .wrap-editor-svelte {\r\n        position: relative;\r\n        z-index: 100001;\r\n    }\r\n\r\n    /*:global(.wrap-editor-svelte div.mce-fullscreen) {*/\r\n    /*    z-index: 999;*/\r\n    /*}*/\r\n\r\n    .loading {\r\n        visibility: hidden;\r\n        pointer-events: none;\r\n    }\r\n\r\n    .l {\r\n        position: absolute;\r\n        top: 50%;\r\n        left: 50%;\r\n        transform: translate(-50%, -50%);\r\n    }\r\n</style>\r\n","<script>\r\n  export let checked = false\r\n  export let label = ''\r\n  export let name = ''\r\n  export let value = ''\r\n</script>\r\n<label class=\"switch\">\r\n    <input type=\"checkbox\" bind:checked on:change name={name} value={value}/>\r\n    {#if label}{label}{/if} <span class=\"slider\"></span>\r\n</label>\r\n<style>\r\n    .switch {\r\n        position: relative;\r\n        display: inline-block;\r\n        width: 60px;\r\n        height: 34px;\r\n    }\r\n\r\n    .switch input {\r\n        opacity: 0;\r\n        width: 0;\r\n        height: 0;\r\n    }\r\n\r\n    .slider {\r\n        position: absolute;\r\n        width: 100%;\r\n        cursor: pointer;\r\n        top: 0;\r\n        left: 0;\r\n        right: 0;\r\n        bottom: 0;\r\n        background-color: #ccc;\r\n        -webkit-transition: 0.4s;\r\n        transition: 0.4s;\r\n        border-radius: 34px;\r\n    }\r\n\r\n    .slider:before {\r\n        position: absolute;\r\n        content: \"\";\r\n        height: 26px;\r\n        width: 26px;\r\n        left: 4px;\r\n        bottom: 4px;\r\n        background-color: white;\r\n        -webkit-transition: 0.4s;\r\n        transition: 0.4s;\r\n        border-radius: 50%;\r\n    }\r\n\r\n    input:checked + .slider {\r\n        background-color: #2196f3;\r\n    }\r\n\r\n    input:checked + .slider {\r\n        box-shadow: 0 0 1px #2196f3;\r\n    }\r\n\r\n    input:checked + .slider:before {\r\n        transform: translateX(26px);\r\n    }\r\n</style>","<script>\r\n  import Editor from './components/Editor.svelte'\r\n  import Switch from './components/Switch.svelte'\r\n  import Hours from './main/Hours.svelte'\r\n  import Minutes from './main/Minutes.svelte'\r\n  import WeekDays from './main/WeekDays.svelte'\r\n  import VHours from './main/VHours.svelte'\r\n  import Days from './main/Days.svelte'\r\n  import VMinutes from './main/VMinutes.svelte'\r\n\r\n  export let templates = []\r\n  export let isOn = false\r\n  export let unsubscribe = false\r\n  export let templateId = 0\r\n  export let datetime = ''\r\n  export let mails = [\r\n    {\r\n      mail_order: 0,\r\n      days: 0,\r\n      hour: 10,\r\n      minute: 0,\r\n      subject: '',\r\n      interval_type: 'interval',\r\n      message: ''\r\n    }\r\n  ]\r\n  let active = 0\r\n\r\n  function change () {\r\n    // const mailOrder = 0\r\n    // mails = [{\r\n    //   mail_order: mailOrder,\r\n    //   days: 0,\r\n    //   hour: 10,\r\n    //   minute: 0,\r\n    //   subject: '',\r\n    //   interval_type: 'interval',\r\n    //   message: ''\r\n    // }]\r\n    active = 0\r\n  }\r\n\r\n  function add () {\r\n    const mailOrder = mails.length\r\n    mails = [...mails, {\r\n      mail_order: mailOrder,\r\n      days: 0,\r\n      hour: 10,\r\n      minute: 0,\r\n      subject: '',\r\n      interval_type: 'interval',\r\n      message: ''\r\n    }]\r\n    active = mailOrder\r\n  }\r\n\r\n  function remove (mailOrder) {\r\n    mails = mails.reduce((previousValue, currentValue) => {\r\n      let next\r\n      if (currentValue.mail_order < mailOrder) {\r\n        next = [...previousValue, currentValue]\r\n      } else if (currentValue.mail_order > mailOrder) {\r\n        next = [...previousValue, { ...currentValue, mail_order: currentValue.mail_order - 1 }]\r\n      } else {\r\n        next = previousValue\r\n      }\r\n      return next\r\n    }, [])\r\n    active = 0\r\n  }\r\n</script>\r\n<!-- <div class=\"wpm-inline-loader\"></div>-->\r\n<div class=\"top\">\r\n    <label>Включить\r\n        <Switch value={1} bind:checked={isOn} on:change={change} name=\"mblar[list][is_on]\"/>\r\n    </label>\r\n    {#if isOn}\r\n        <select name=\"mblar[list][template_id]\" bind:value={templateId}>\r\n            <option value={0}>Без шаблона</option>\r\n            {#each templates as template (template.id)}\r\n                <option value={+template.id}>{template.name}</option>\r\n            {/each}\r\n        </select>\r\n    {/if}\r\n</div>\r\n{#if isOn}\r\n    <div class=\"tabs\">\r\n        <ul class=\"tabs-ul\">\r\n            {#each mails as mail, index (mail.mail_order)}\r\n                <li class=\"tabs-li\">\r\n                    <button type=\"button\" class=\"tabs__button\"\r\n                            class:active={active === mail.mail_order}\r\n                            on:click={() => { active = mail.mail_order }}>\r\n                        Письмо {mail.mail_order + 1}\r\n                    </button>\r\n                </li>\r\n            {/each}\r\n            <li class=\"button-wrap\">\r\n                <button on:click={add} class=\"button button-primary button-icon\" type=\"button\">\r\n                    <span class=\"dashicons dashicons-plus\"></span> <span>Письмо</span>\r\n                </button>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n    {#each mails as mail, index (mail.mail_order)}\r\n        <div style={active === mail.mail_order ? '' : 'display:none'}>\r\n            <input type=\"hidden\" bind:value={mail.mail_order} name=\"mblar[mail][{mail.mail_order}][mail_order]\">\r\n            <div class=\"tab__inner\">\r\n                <div class=\"wpm-row\">\r\n                    <div>\r\n                        <label>\r\n                            <input value=\"interval\" bind:group={mail.interval_type}\r\n                                   type=\"radio\" name=\"mblar[mail][{mail.mail_order}][interval_type]\"> Дни часы минуты\r\n                        </label>\r\n                        <label style=\"margin-left: 10px;\">\r\n                            <input value=\"day_of_the_week\" bind:group={mail.interval_type}\r\n                                   type=\"radio\" name=\"mblar[mail][{mail.mail_order}][interval_type]\"> Конкретный день\r\n                        </label>\r\n                    </div>\r\n                    {#if mail.interval_type === 'interval'}\r\n                        <div class=\"interval\">\r\n                            Отправить письмо через\r\n                            <label class=\"schedule-days-wrap\">\r\n                                <Days bind:value={mail.days} name=\"mblar[mail][{mail.mail_order}][days]\"/>\r\n                                дней\r\n                            </label>\r\n                            <label class=\"schedule-days-wrap\">\r\n                                <VHours bind:value={mail.hour} name=\"mblar[mail][{mail.mail_order}][hour]\"/>\r\n                                часов\r\n                            </label>\r\n                            <label class=\"schedule-days-wrap\">\r\n                                <VMinutes bind:value={mail.minute} name=\"mblar[mail][{mail.mail_order}][minute]\"/>\r\n                                минут\r\n                            </label>\r\n                            после\r\n                            {#if mail.mail_order === 0}начала срока доступа{:else }предыдущего письма{/if}\r\n                        </div>\r\n                    {:else }\r\n                        <div class=\"interval\">\r\n                            Отправить письмо в следующий\r\n                            <label class=\"schedule-days-wrap\">\r\n                                <WeekDays bind:value={mail.days} name=\"mblar[mail][{mail.mail_order}][days]\"/>\r\n                            </label>\r\n                            в\r\n                            <label class=\"schedule-days-wrap\">\r\n                                <Hours bind:value={mail.hour} name=\"mblar[mail][{mail.mail_order}][hour]\"/>\r\n                                часов\r\n                            </label>\r\n                            <label class=\"schedule-days-wrap\">\r\n                                <Minutes bind:value={mail.minute} name=\"mblar[mail][{mail.mail_order}][minute]\"/>\r\n                                минут\r\n                            </label>\r\n                            после\r\n                            {#if mail.mail_order === 0}начала срока доступа{:else }предыдущего письма{/if}\r\n                        </div>\r\n                    {/if}\r\n                </div>\r\n                <div class=\"wpm-row\">\r\n                    <label>\r\n                        <input type=\"text\" class=\"large-text\" bind:value={mail.subject}\r\n                               name=\"mblar[mail][{mail.mail_order}][subject]\"\r\n                               placeholder=\"Тема письма\">\r\n                    </label>\r\n                </div>\r\n                <div class=\"wpm-row\">\r\n                    <Editor id=\"mail_text_{mail.mail_order}\" mediaButtons\r\n                            name=\"mblar[mail][{mail.mail_order}][message]\"\r\n                            value={mail.message}\r\n                            on:change={({ detail: { content } }) => { mail.message = content }}\r\n                    />\r\n                </div>\r\n            </div>\r\n            <div style=\"text-align: right\">\r\n                {#if mails.length > 1}\r\n                    <button class=\"button button-cancel\" type=\"button\" on:click={() => { remove(mail.mail_order) }}>\r\n                        <span class=\"dashicons dashicons-trash\"></span> Удалить\r\n                    </button>\r\n                {/if}\r\n            </div>\r\n        </div>\r\n    {/each}\r\n    {#if mails.length}\r\n        {#each window.__mblar_data__.wpm_auto_login_shortcodes_tips as tip}\r\n            <span class=\"code-string\">{tip.tag}</span> - {tip.label} <br>\r\n        {/each}\r\n    {/if}\r\n    {#if datetime}\r\n        <div class=\"wpm-row\">\r\n            <p>Рассылка от {datetime}</p>\r\n        </div>\r\n    {/if}\r\n    <div class=\"wpm-row bottom\">\r\n        <label>\r\n            <input type=\"checkbox\" value={1} name=\"mblar[list][unsubscribe]\" bind:checked={unsubscribe}>\r\n            Отписать от всех остальных рассылок\r\n        </label>\r\n    </div>\r\n{/if}\r\n<style>\r\n    .interval {\r\n        padding-top: 20px;\r\n    }\r\n\r\n    .button-wrap {\r\n        display: inline-block;\r\n        float: none;\r\n        margin-bottom: 0;\r\n    }\r\n\r\n    .button-icon {\r\n        display: inline-flex;\r\n        align-items: center;\r\n        height: 34px;\r\n    }\r\n\r\n    .dashicons {\r\n        font-size: 14px;\r\n        height: auto;\r\n        width: auto;\r\n        margin-right: 5px;\r\n    }\r\n\r\n    .top {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        margin-bottom: 15px;\r\n    }\r\n\r\n    .bottom {\r\n        padding-top: 20px;\r\n        border-top: 2px solid #0c0c0c;\r\n    }\r\n\r\n    .tabs {\r\n        display: flex;\r\n        /*border-right: 1px solid #dddddd;*/\r\n    }\r\n\r\n    .tabs-ul {\r\n        width: 100%;\r\n        padding: 0.2em 0.2em 2em !important;\r\n        border-bottom: 2px solid black !important;\r\n    }\r\n\r\n    .tabs-li {\r\n        list-style: none;\r\n        float: left;\r\n    }\r\n\r\n    .tabs__button {\r\n        cursor: pointer;\r\n        padding: 0.5em 1em;\r\n        text-decoration: none;\r\n        margin: 0 8px 8px 0;\r\n        border: 1px solid #ccc;\r\n        background-color: #f8f8f8;\r\n    }\r\n\r\n    .tabs__button:first-child {\r\n        border-right: 1px solid #dddddd;\r\n    }\r\n\r\n    .active {\r\n        background-color: #3b8d69;\r\n        color: #ffffff;\r\n    }\r\n\r\n    .tab__inner {\r\n        padding: 1em 1.4em;\r\n    }\r\n\r\n    .button-cancel {\r\n        display: inline-flex;\r\n        align-items: center;\r\n\r\n    }\r\n\r\n    .button-cancel .dashicons {\r\n        font-size: 20px;\r\n    }\r\n\r\n    .button-cancel:hover {\r\n        color: #ffffff;\r\n        background-color: #A03B36;\r\n        border-color: #A03B36;\r\n        box-shadow: 0 1px 0 #A03B36;\r\n    }\r\n</style>\r\n"],"names":[],"version":3,"file":"main.css.map"}