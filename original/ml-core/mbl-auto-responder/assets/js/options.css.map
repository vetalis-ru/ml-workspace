{"mappings":"ACII,sKCwBA,4EAUA,2DAKC,uFAMD,yBACI,4CAGH,iEC9CD,gJAQA,uQAUC,qFAOD,oFAKA,wFAKA,mHAIC,iFASA,+DCvCD,iDAEC,oEAMD,gDC+EA,yCAIA,sDAGC","sources":["options.css","src-frontend/options/Alert.svelte","src-frontend/options/Field.svelte","src-frontend/components/Loader.svelte","src-frontend/options/Text.svelte","src-frontend/options/App.svelte"],"sourcesContent":[".alert.svelte-3saptr {\n  color: #155724;\n  background-color: #d4edda;\n  border: 1px solid #c3e6cb;\n  border-radius: .25rem;\n  margin-bottom: 1rem;\n  padding: .75rem 1.25rem;\n  position: relative;\n}\n\n.mblar-setting.svelte-dozp96 {\n  flex-wrap: wrap;\n  align-items: center;\n  display: flex;\n}\n\n.mblar-setting-r.svelte-dozp96 {\n  max-width: 450px;\n  flex-grow: 1;\n}\n\n.mblar-setting-l.svelte-dozp96, .mblar-setting-r.svelte-dozp96 {\n  padding: 10px 10px 10px 0;\n}\n\n@media (min-width: 768px) {\n  .mblar-setting-l.svelte-dozp96 {\n    width: 200px;\n  }\n}\n\n.mblar-setting-label.svelte-dozp96 {\n  color: #1d2327;\n  font-weight: bold;\n}\n\n.loader.svelte-1nfoswr {\n  height: var(--loader-size, 1em);\n  width: calc(var(--loader-size, 1em) * 5);\n  font-size: 20px;\n  display: inline-block;\n  position: relative;\n}\n\n.loader__dot.svelte-1nfoswr {\n  width: var(--loader-size, 1em);\n  height: var(--loader-size, 1em);\n  background: var(--loader-color, #555);\n  border-radius: .5em;\n  animation-duration: .5s;\n  animation-timing-function: ease;\n  animation-iteration-count: infinite;\n  display: block;\n  position: absolute;\n}\n\n.loader__dot.svelte-1nfoswr:nth-child(1) {\n  animation-name: svelte-1nfoswr-reveal;\n  left: 0;\n}\n\n.loader__dot.svelte-1nfoswr:nth-child(2) {\n  animation-name: svelte-1nfoswr-slide;\n  left: 0;\n}\n\n.loader__dot.svelte-1nfoswr:nth-child(3) {\n  animation-name: svelte-1nfoswr-slide;\n  left: 1.5em;\n}\n\n.loader__dot.svelte-1nfoswr:nth-child(4) {\n  animation-name: svelte-1nfoswr-reveal;\n  animation-direction: reverse;\n  left: 3em;\n}\n\n@keyframes svelte-1nfoswr-reveal {\n  from {\n    transform: scale(.001);\n  }\n\n  to {\n    transform: scale(1);\n  }\n}\n\n@keyframes svelte-1nfoswr-slide {\n  to {\n    transform: translateX(1.5em);\n  }\n}\n\n.mblar-setting.svelte-1nw6zs1 {\n  margin-bottom: 12px;\n}\n\n.mblar-setting-label.svelte-1nw6zs1 {\n  color: #1d2327;\n  margin-bottom: 8px;\n}\n\ninput.svelte-1nw6zs1 {\n  width: 100%;\n  max-width: 768px;\n}\n\n.container.svelte-1ss1fzk {\n  padding: 0 15px;\n}\n\n.title.svelte-1ss1fzk {\n  align-items: center;\n  display: flex;\n}\n\n.submit.svelte-1ss1fzk {\n  margin-top: 10px;\n}\n\n/*# sourceMappingURL=options.css.map */\n","<div class=\"alert\" role=\"alert\">\r\n    Настройки сохранены!\r\n</div>\r\n<style>\r\n    .alert {\r\n        position: relative;\r\n        padding: 0.75rem 1.25rem;\r\n        margin-bottom: 1rem;\r\n        border: 1px solid #c3e6cb;\r\n        border-radius: 0.25rem;\r\n        color: #155724;\r\n        background-color: #d4edda;\r\n    }\r\n</style>","<script>\r\n  export let id\r\n  export let name\r\n  export let value\r\n</script>\r\n<div class=\"mblar-setting\">\r\n    <div class=\"mblar-setting-l\">\r\n        {#if !$$slots.shortcode}\r\n            <label for={id} class=\"mblar-setting-label\">\r\n                <slot name=\"label\"></slot>\r\n            </label>\r\n        {:else }\r\n        <span class=\"mblar-setting-label\">\r\n            <slot name=\"label\"></slot>\r\n        </span>\r\n        {/if}\r\n    </div>\r\n    <div class=\"mblar-setting-r\">\r\n        {#if !$$slots.shortcode}\r\n            <slot name=\"input\" id={id} _name={name} value={value}>\r\n                <input type=\"text\" id={id} name={name} value={value} style=\"width: 100%;\">\r\n            </slot>\r\n        {:else }\r\n            <slot name=\"shortcode\"></slot>\r\n        {/if}\r\n    </div>\r\n</div>\r\n<style>\r\n    .mblar-setting {\r\n        display: -webkit-box;\r\n        display: -ms-flexbox;\r\n        display: flex;\r\n        flex-wrap: wrap;\r\n        -webkit-box-align: center;\r\n        -ms-flex-align: center;\r\n        align-items: center\r\n    }\r\n\r\n    .mblar-setting-r {\r\n        max-width: 450px;\r\n        -webkit-box-flex: 1;\r\n        -ms-flex-positive: 1;\r\n        flex-grow: 1\r\n    }\r\n\r\n    .mblar-setting-l, .mblar-setting-r {\r\n        padding: 10px 10px 10px 0;\r\n    }\r\n\r\n    @media (min-width: 768px) {\r\n        .mblar-setting-l {\r\n            width: 200px;\r\n        }\r\n    }\r\n\r\n    .mblar-setting-label {\r\n        color: #1d2327;\r\n        font-weight: bold\r\n    }\r\n</style>","<div class=\"loader\" {...$$props}>\r\n    <span class=\"loader__dot\"></span>\r\n    <span class=\"loader__dot\"></span>\r\n    <span class=\"loader__dot\"></span>\r\n    <span class=\"loader__dot\"></span>\r\n</div>\r\n<style>\r\n    .loader {\r\n        display: inline-block;\r\n        font-size: 20px;\r\n        position: relative;\r\n        height: var(--loader-size, 1em);\r\n        width: calc(var(--loader-size, 1em) * 5);\r\n    }\r\n\r\n    .loader__dot {\r\n        display: block;\r\n        width: var(--loader-size, 1em);\r\n        height: var(--loader-size, 1em);\r\n        border-radius: 0.5em;\r\n        background: var(--loader-color, #555);\r\n        position: absolute;\r\n        animation-duration: 0.5s;\r\n        animation-timing-function: ease;\r\n        animation-iteration-count: infinite;\r\n    }\r\n\r\n    .loader__dot:nth-child(1) {\r\n        left: 0;\r\n        animation-name: reveal;\r\n    }\r\n\r\n    .loader__dot:nth-child(2) {\r\n        left: 0;\r\n        animation-name: slide;\r\n    }\r\n\r\n    .loader__dot:nth-child(3) {\r\n        left: 1.5em;\r\n        animation-name: slide;\r\n    }\r\n\r\n    .loader__dot:nth-child(4) {\r\n        left: 3em;\r\n        animation-name: reveal;\r\n        animation-direction: reverse;\r\n    }\r\n\r\n    @keyframes reveal {\r\n        from {\r\n            transform: scale(0.001);\r\n        }\r\n        to {\r\n            transform: scale(1);\r\n        }\r\n    }\r\n\r\n    @keyframes slide {\r\n        to {\r\n            transform: translateX(1.5em);\r\n        }\r\n    }\r\n</style>","<script>\r\n  export let id\r\n  export let name\r\n  export let value\r\n</script>\r\n<div class=\"mblar-setting\">\r\n    <div>\r\n        <label for={id} class=\"mblar-setting-label\">\r\n            <slot name=\"label\"></slot>\r\n        </label>\r\n    </div>\r\n    <div>\r\n        <input type=\"text\" id={id} name={name} value={value} style=\"width: 100%;\">\r\n    </div>\r\n</div>\r\n<style>\r\n    .mblar-setting {\r\n        margin-bottom: 12px;\r\n    }\r\n\r\n    .mblar-setting-label {\r\n        color: #1d2327;\r\n        margin-bottom: 8px;\r\n    }\r\n    input {\r\n        width: 100%;\r\n        max-width: 768px;\r\n    }\r\n</style>","<script>\r\n  import Alert from './Alert.svelte'\r\n  import Shortcode from './Shortcode.svelte'\r\n  import Field from './Field.svelte'\r\n  import Loader from '../components/Loader.svelte'\r\n  import { writable } from 'svelte/store'\r\n  import rest from '../rest'\r\n  import axios from 'axios'\r\n  import { onMount } from 'svelte'\r\n  import Text from './Text.svelte'\r\n\r\n  let form\r\n  const store = writable({\r\n    loading: true,\r\n    options: [],\r\n    texts: [],\r\n    success: false\r\n  })\r\n\r\n  async function submit () {\r\n    $store = {\r\n      ...$store,\r\n      loading: true,\r\n      success: false\r\n    }\r\n    try {\r\n      const response = await axios.post(rest('options/save'), new FormData(form))\r\n      if (response.data.ok) {\r\n        $store = {\r\n          ...$store,\r\n          success: true,\r\n          options: response.data.options\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.error(e)\r\n    }\r\n    $store.loading = false\r\n  }\r\n\r\n  onMount(async () => {\r\n    try {\r\n      const response = await axios.get(rest('options'))\r\n      if (response.data.ok) {\r\n        $store = {\r\n          ...$store,\r\n          options: response.data.options.filter(i => i.group === 'common'),\r\n          texts: response.data.options.filter(i => i.group === 'text'),\r\n          loading: false\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.error(e)\r\n    }\r\n  })\r\n</script>\r\n<div class=\"container\">\r\n    <div class=\"title\">\r\n        <h1 style=\"margin-right: 15px;\">Настройки</h1>\r\n        {#if $store.loading}\r\n            <Loader/>\r\n        {/if}\r\n    </div>\r\n    {#if $store.success}\r\n        <Alert/>\r\n    {/if}\r\n    <form on:submit|preventDefault={submit} bind:this={form}>\r\n        {#each $store.options as option (option.id)}\r\n            <Field id=\"mblar_{option.id}\" name={option.id} value={option.value}>\r\n                <span slot=\"label\">{option.label}</span>\r\n            </Field>\r\n        {/each}\r\n        <h2>Шорткоды</h2>\r\n        <Field>\r\n            <span slot=\"label\">Отписаться от всех рассылок</span>\r\n            <span slot=\"shortcode\">\r\n                <Shortcode>[m_unsubscribe_all]</Shortcode>\r\n            </span>\r\n        </Field>\r\n        <Field>\r\n            <span slot=\"label\">Отписаться от текущей рассылки</span>\r\n            <span slot=\"shortcode\">\r\n                <Shortcode>[m_unsubscribe_current]</Shortcode>\r\n            </span>\r\n        </Field>\r\n<!--        <Field>-->\r\n<!--            <span slot=\"label\">Форма отписки</span>-->\r\n<!--            <span slot=\"shortcode\">-->\r\n<!--                <Shortcode>[m_unsubscribe_form]</Shortcode>-->\r\n<!--            </span>-->\r\n<!--        </Field>-->\r\n        <h2>Тексты</h2>\r\n        {#each $store.texts as text (text.id)}\r\n            <Text id=\"mblar_{text.id}\" name={text.id} value={text.value}>\r\n                <span slot=\"label\">{text.label}</span>\r\n            </Text>\r\n        {/each}\r\n        <div class=\"submit\">\r\n            <button class=\"button button-primary\" disabled={$store.loading}>Сохранить</button>\r\n        </div>\r\n    </form>\r\n</div>\r\n<style>\r\n    .container {\r\n        padding: 0 15px;\r\n    }\r\n\r\n    .title {\r\n        display: flex;\r\n        align-items: center;\r\n    }\r\n\r\n    .submit {\r\n        margin-top: 10px;\r\n    }\r\n</style>"],"names":[],"version":3,"file":"options.css.map"}